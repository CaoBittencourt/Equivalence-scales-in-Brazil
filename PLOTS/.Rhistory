, units = 'cm'
)
# ENGEL POF 2008
lista.pof2008_ss.ajustada.summarise3$Engel %>%
filter(str_detect(name,'Renda')) %>%
mutate(
name = fct_reorder(name, value, max)
, value = round(value, 2)
) %>%
ggplot(
aes(
x = name
, y = value
, fill = classe_social
)) +
geom_col(position = 'dodge') +
facet_wrap(facets = vars(family.type)) +
# scale_x_discrete(
#   labels = function(x){
#     x %>%
#       str_replace(
#         pattern = ' '
#         , replacement = '\n'
#       )
#   }
# ) +
scale_y_continuous(labels = scales::label_dollar(
prefix = 'R$'
, big.mark = '.'
, decimal.mark = ','
)) +
viridis::scale_fill_viridis(
discrete = T
, option = 'D'
) +
theme(
legend.title = element_blank()
, axis.title.x = element_blank()
, axis.title.y = element_blank()
)
ggsave(
filename = 'pof2008_renda_engel.png'
, height = 8.25*3 #, height = 7.66*3
, width = 15*3
, units = 'cm'
)
# ROTHBARTH POF 2002
lista.pof2002_ss.ajustada.summarise3$Rothbarth %>%
filter(str_detect(name,'Renda')) %>%
mutate(
name = fct_reorder(name, value, max)
, value = round(value, 2)
) %>%
ggplot(
aes(
x = name
, y = value
, fill = classe_social
)) +
geom_col(position = 'dodge') +
facet_wrap(facets = vars(family.type), nrow = 1) +
scale_x_discrete(
labels = function(x){
x %>%
str_replace(
pattern = ' '
, replacement = '\n'
)
}
) +
scale_y_continuous(labels = scales::label_dollar(
prefix = 'R$'
, big.mark = '.'
, decimal.mark = ','
)) +
viridis::scale_fill_viridis(
discrete = T
, option = 'D'
) +
theme(
legend.title = element_blank()
, axis.title.x = element_blank()
, axis.title.y = element_blank()
)
ggsave(
filename = 'pof2002_renda_rothbarth.png'
, height = 8.25*3 #, height = 7.66*3
, width = 15*3
, units = 'cm'
)
# ROTHBARTH POF 2008
lista.pof2008_ss.ajustada.summarise3$Rothbarth %>%
filter(str_detect(name,'Renda')) %>%
mutate(
name = fct_reorder(name, value, max)
, value = round(value, 2)
) %>%
ggplot(
aes(
x = name
, y = value
, fill = classe_social
)) +
geom_col(position = 'dodge') +
facet_wrap(facets = vars(family.type), nrow = 1) +
scale_x_discrete(
labels = function(x){
x %>%
str_replace(
pattern = ' '
, replacement = '\n'
)
}
) +
scale_y_continuous(labels = scales::label_dollar(
prefix = 'R$'
, big.mark = '.'
, decimal.mark = ','
)) +
viridis::scale_fill_viridis(
discrete = T
, option = 'D'
) +
theme(
legend.title = element_blank()
, axis.title.x = element_blank()
, axis.title.y = element_blank()
)
ggsave(
filename = 'pof2008_renda_rothbarth.png'
, height = 8.25*3 #, height = 7.66*3
, width = 15*3
, units = 'cm'
)
# 8. VISUALIZAÇÃO (CONSUMO EFETIVO) -------------------------------------------------------------------------
theme_set(ggthemes::theme_hc(base_size = 25))
# ENGEL POF 2002
lista.pof2002_ss.ajustada.summarise3$Engel %>%
filter(str_detect(name,'DTM'), !str_detect(name,'CTV')) %>%
mutate(
name = fct_reorder(name, value, max)
, value = round(value, 2)
) %>%
ggplot(
aes(
x = name
, y = value
, fill = classe_social
)) +
geom_col(position = 'dodge') +
facet_wrap(facets = vars(family.type)) +
# scale_x_discrete(
#   labels = function(x){
#     x %>%
#       str_replace(
#         pattern = '^(\\S+) (\\S+) '
#         , replacement = '\\1 \\2\n'
#       )
#   }
# ) +
scale_y_continuous(labels = scales::label_dollar(
prefix = 'R$'
, big.mark = '.'
, decimal.mark = ','
)) +
viridis::scale_fill_viridis(
discrete = T
, option = 'D'
) +
theme(
legend.title = element_blank()
, axis.title.x = element_blank()
, axis.title.y = element_blank()
)
ggsave(
filename = 'pof2002_consumo_engel.png'
, height = 8.25*3 #, height = 7.66*3
, width = 15*3
, units = 'cm'
)
# ENGEL POF 2008
lista.pof2008_ss.ajustada.summarise3$Engel %>%
filter(str_detect(name,'DTM'), !str_detect(name,'CTV')) %>%
mutate(
name = fct_reorder(name, value, max)
, value = round(value, 2)
) %>%
ggplot(
aes(
x = name
, y = value
, fill = classe_social
)) +
geom_col(position = 'dodge') +
facet_wrap(facets = vars(family.type)) +
# scale_x_discrete(
#   labels = function(x){
#     x %>%
#       str_replace(
#         pattern = '^(\\S+) (\\S+) '
#         , replacement = '\\1 \\2\n'
#       )
#   }
# ) +
scale_y_continuous(labels = scales::label_dollar(
prefix = 'R$'
, big.mark = '.'
, decimal.mark = ','
)) +
viridis::scale_fill_viridis(
discrete = T
, option = 'D'
) +
theme(
legend.title = element_blank()
, axis.title.x = element_blank()
, axis.title.y = element_blank()
)
ggsave(
filename = 'pof2008_consumo_engel.png'
, height = 8.25*3 #, height = 7.66*3
, width = 15*3
, units = 'cm'
)
# ROTHBARTH POF 2002
lista.pof2002_ss.ajustada.summarise3$Rothbarth %>%
filter(str_detect(name,'DTM'), !str_detect(name,'CTV')) %>%
mutate(
name = fct_reorder(name, value, max)
, value = round(value, 2)
) %>%
ggplot(
aes(
x = name
, y = value
, fill = classe_social
)) +
geom_col(position = 'dodge') +
facet_wrap(facets = vars(family.type), nrow = 1) +
scale_x_discrete(
labels = function(x){
x %>%
str_replace(
pattern = '^(\\S+) (\\S+) '
, replacement = '\\1 \\2\n'
)
}
) +
scale_y_continuous(labels = scales::label_dollar(
prefix = 'R$'
, big.mark = '.'
, decimal.mark = ','
)) +
viridis::scale_fill_viridis(
discrete = T
, option = 'D'
) +
ggthemes::theme_hc(base_size = 24) +
theme(
legend.title = element_blank()
, axis.title.x = element_blank()
, axis.title.y = element_blank()
)
ggsave(
filename = 'pof2002_consumo_rothbarth.png'
, height = 8.25*3 #, height = 7.66*3
, width = 15*3
, units = 'cm'
)
# ROTHBARTH POF 2008
lista.pof2008_ss.ajustada.summarise3$Rothbarth %>%
filter(str_detect(name,'DTM'), !str_detect(name,'CTV')) %>%
mutate(
name = fct_reorder(name, value, max)
, value = round(value, 2)
) %>%
ggplot(
aes(
x = name
, y = value
, fill = classe_social
)) +
geom_col(position = 'dodge') +
facet_wrap(facets = vars(family.type), nrow = 1) +
scale_x_discrete(
labels = function(x){
x %>%
str_replace(
pattern = '^(\\S+) (\\S+) '
, replacement = '\\1 \\2\n'
)
}
) +
scale_y_continuous(labels = scales::label_dollar(
prefix = 'R$'
, big.mark = '.'
, decimal.mark = ','
)) +
viridis::scale_fill_viridis(
discrete = T
, option = 'D'
) +
ggthemes::theme_hc(base_size = 24) +
theme(
legend.title = element_blank()
, axis.title.x = element_blank()
, axis.title.y = element_blank()
)
ggsave(
filename = 'pof2008_consumo_rothbarth.png'
, height = 8.25*3 #, height = 7.66*3
, width = 15*3
, units = 'cm'
)
# 9. VISUALIZAÇÃO (CUSTO DE VIDA) -------------------------------------------------------------------------
theme_set(ggthemes::theme_hc(base_size = 25))
# ENGEL POF 2002
lista.pof2002_ss.ajustada.summarise3$Engel %>%
filter(str_detect(name,'DTM|CTV'), !str_detect(name,'CSM')) %>%
mutate(
name = fct_reorder(name, value, max, .desc = T)
, value = round(value, 2)
) %>%
ggplot(
aes(
x = name
, y = value
, fill = classe_social
)) +
geom_col(position = 'dodge') +
facet_wrap(facets = vars(family.type)) +
# scale_x_discrete(
#   labels = function(x){
#     x %>%
#       str_replace(
#         pattern = '^(\\S+) (\\S+) '
#         , replacement = '\\1 \\2\n'
#       )
#   }
# ) +
scale_y_continuous(labels = scales::label_dollar(
prefix = 'R$'
, big.mark = '.'
, decimal.mark = ','
)) +
viridis::scale_fill_viridis(
discrete = T
, option = 'D'
) +
theme(
legend.title = element_blank()
, axis.title.x = element_blank()
, axis.title.y = element_blank()
)
ggsave(
filename = 'pof2002_custodevida_engel.png'
, height = 8.25*3
, width = 15*3
, units = 'cm'
)
# ENGEL POF 2008
lista.pof2008_ss.ajustada.summarise3$Engel %>%
filter(str_detect(name,'DTM|CTV'), !str_detect(name,'CSM')) %>%
mutate(
name = fct_reorder(name, value, max, .desc = T)
, value = round(value, 2)
) %>%
ggplot(
aes(
x = name
, y = value
, fill = classe_social
)) +
geom_col(position = 'dodge') +
facet_wrap(facets = vars(family.type)) +
# scale_x_discrete(
#   labels = function(x){
#     x %>%
#       str_replace(
#         pattern = '^(\\S+) (\\S+) '
#         , replacement = '\\1 \\2\n'
#       )
#   }
# ) +
scale_y_continuous(labels = scales::label_dollar(
prefix = 'R$'
, big.mark = '.'
, decimal.mark = ','
)) +
viridis::scale_fill_viridis(
discrete = T
, option = 'D'
) +
theme(
legend.title = element_blank()
, axis.title.x = element_blank()
, axis.title.y = element_blank()
)
ggsave(
filename = 'pof2008_custodevida_engel.png'
, height = 8.25*3 #, height = 7.66*3
, width = 15*3
, units = 'cm'
)
# ROTHBARTH POF 2002
lista.pof2002_ss.ajustada.summarise3$Rothbarth %>%
filter(str_detect(name,'DTM|CTV'), !str_detect(name,'CSM')) %>%
mutate(
name = fct_reorder(name, value, max, .desc = T)
, value = round(value, 2)
) %>%
ggplot(
aes(
x = name
, y = value
, fill = classe_social
)) +
geom_col(position = 'dodge') +
facet_wrap(facets = vars(family.type), nrow = 1) +
scale_x_discrete(
labels = function(x){
x %>%
str_replace(
pattern = '^(\\S+) (\\S+) '
, replacement = '\\1 \\2\n'
)
}
) +
scale_y_continuous(labels = scales::label_dollar(
prefix = 'R$'
, big.mark = '.'
, decimal.mark = ','
)) +
viridis::scale_fill_viridis(
discrete = T
, option = 'D'
) +
ggthemes::theme_hc(base_size = 24) +
theme(
legend.title = element_blank()
, axis.title.x = element_blank()
, axis.title.y = element_blank()
)
ggsave(
filename = 'pof2002_custodevida_rothbarth.png'
, height = 8.25*3 #, height = 7.66*3
, width = 15*3
, units = 'cm'
)
# ROTHBARTH POF 2008
lista.pof2008_ss.ajustada.summarise3$Rothbarth %>%
filter(str_detect(name,'DTM|CTV'), !str_detect(name,'CSM')) %>%
mutate(
name = fct_reorder(name, value, max, .desc = T)
, value = round(value, 2)
) %>%
ggplot(
aes(
x = name
, y = value
, fill = classe_social
)) +
geom_col(position = 'dodge') +
facet_wrap(facets = vars(family.type), nrow = 1) +
scale_x_discrete(
labels = function(x){
x %>%
str_replace(
pattern = '^(\\S+) (\\S+) '
, replacement = '\\1 \\2\n'
)
}
) +
scale_y_continuous(labels = scales::label_dollar(
prefix = 'R$'
, big.mark = '.'
, decimal.mark = ','
)) +
viridis::scale_fill_viridis(
discrete = T
, option = 'D'
) +
ggthemes::theme_hc(base_size = 24) +
theme(
legend.title = element_blank()
, axis.title.x = element_blank()
, axis.title.y = element_blank()
)
ggsave(
filename = 'pof2008_custodevida_rothbarth.png'
, height = 8.25*3 #, height = 7.66*3
, width = 15*3
, units = 'cm'
)
child_cost
# 2. DADOS -------------------------------------------------------------------
# Escalas nacionais e internacionais normalizadas para AA <=> (2,0)
readr::read_csv(
url('https://docs.google.com/spreadsheets/d/e/2PACX-1vRsrF8OaQGKav6PMpUKtnxMYJheKdti3WDkCql92BpmaXepFUUsYqmIuKuMO5h6gumDo8EyDDJWNs4o/pub?gid=0&single=true&output=csv')
) -> scales_norm
# Custos por criança das escalas nacionais e internacionais
readr::read_csv(
url('https://docs.google.com/spreadsheets/d/e/2PACX-1vRsrF8OaQGKav6PMpUKtnxMYJheKdti3WDkCql92BpmaXepFUUsYqmIuKuMO5h6gumDo8EyDDJWNs4o/pub?gid=1481008835&single=true&output=csv')
) -> child_cost
child_cost
scales_norm
scales_norm %>% nrow()
700*.3
750*.3
750*.5
850*.5
850*.3
